# 俄罗斯方块游戏项目
## 一、项目概述
本项目基于 C++ 与 EasyX 图形库开发俄罗斯方块游戏，支持单人模式与双人对战模式。实现方块绘制、移动、旋转、堆积、消除行及计分等核心玩法，还融入技能机制（双人模式），为玩家带来经典又具创新的游戏体验，同时可作为图形化编程、游戏逻辑设计的实践案例。

## 二、文件结构说明
核心代码集中在单个 `.cpp` 文件，依赖 **EasyX 图形库**（用于图形绘制、输入处理 ）运行，主要模块及功能如下：
- **类定义**：
  - `Block`：封装方块坐标、状态、类型等属性，是构成俄罗斯方块的基础单元。 
  - `game`：实现单人模式游戏逻辑，包含绘制背景、方块操作（移动、旋转、堆积 ）、行消除、计分等功能，是单人游戏的核心类。 
  - `game_double`：继承 `game` 类，拓展双人对战模式，支持双方独立操作、技能触发（如消行干扰对手 ），实现对战交互。 
  - `play`：负责游戏启动流程，包括模式选择（单人 / 双人 ）、界面初始化，衔接不同游戏模式的运行。 
- **资源文件**：涉及背景图片（如 `����.png` ）、角色图片（如 `ˮ��.png` `����.png` ）、方块颜色对应的图片（`blue.jpg` 等 ），用于美化游戏界面，需与可执行文件路径适配。 

## 三、关键功能模块
### （一）图形绘制与界面
1. **背景与边界**：`drawbk` 系列函数绘制游戏区域边界、网格，通过 `rectangle`、`line` 函数构建基础视觉框架；`drawbkground` 初始化整体背景，设置颜色、文字提示（如操作说明 ）。 
2. **方块绘制**：`Draw_block` `DrawSingleBlock` 等函数，借助 `putimage` 结合掩码实现带透明效果的方块绘制，依据方块类型（`Blocktype` 定义 ）、状态（旋转角度 ）渲染不同形态，让方块显示更生动。 
3. **界面元素**：包含分数显示（`outtextxy` 输出 `score` ）、技能提示、角色形象（如 `mizuki` `golden` 系列图片 ），丰富游戏视觉反馈。 

### （二）游戏逻辑（以单人模式为例 ）
1. **方块操作**：
    - **移动与旋转**：`canGoLeft` `canGoRight` `canGoFall` `canRotate` 函数检测移动、旋转合法性（避免碰撞边界或已堆积方块 ），`moveBlock` 系列函数响应键盘输入（如 `A`/`D` 控制左右、`W` 旋转 ），实现方块位置调整。 
    - **自动下落**：`Move_auto` 函数控制方块自动下落，结合 `LandBlock` 检测是否堆积（堆积则固定方块到 `LandedBlock` 数组，生成新方块 ）。 
2. **行消除与计分**：`clean_row` 函数遍历检测满行，清除满行并使上方方块下落，同步更新 `score`，增强游戏策略性与成就感。 
3. **游戏结束判定**：方块堆积超出顶部边界时，`is_end` 标记为 `true`，触发结束界面与重新开始选项。 

### （三）双人对战模式（`game_double` 类 ）
1. **双区域独立运行**：通过两个 `game` 对象（`player1` `player2` ），分别管理左右两侧游戏区域，实现双方独立操作、方块堆积与消除。 
2. **技能机制**：`skill` 函数在消行时随机触发技能（如清除自身行、增加对手行、干扰对手方块 ），增加对战互动性与趣味性，打破单一玩法。 
3. **胜负判定**：一方方块堆积超出边界则判定失败，显示对应角色胜利 / 失败状态，强化对战竞技性。 

### （四）启动与模式选择（`play` 类 ）
1. **开始界面**：`start` 函数加载启动背景图，通过鼠标点击检测选择单人、双人模式或退出，衔接不同游戏流程。 
2. **模式切换**：依据选择的 `is_mode` 标记，创建 `game`（单人 ）或 `game_double`（双人 ）对象，调用 `controler_easy` 启动对应模式游戏逻辑。 

## 四、环境依赖与运行
### （一）环境依赖
需安装 **EasyX 图形库**，适配 Windows 平台。可从[官方网站](https://easyx.cn/)下载对应版本（匹配编译器，如 Visual Studio、Dev - C++ 等 ），按指引完成安装与环境配置（如添加库路径、包含头文件 ）。

### （二）运行步骤
1. 确认开发环境已正确配置 EasyX 图形库，将项目代码（单个 `.cpp` 文件 ）及相关资源文件（图片等 ）放入同一目录。 
2. 编译代码（需链接 EasyX 库 ），生成可执行文件。不同编译器配置参考 EasyX 官方文档，例如 Visual Studio 需添加库引用，Dev - C++ 需设置链接选项。 
3. 运行可执行文件，在开始界面点击选择“单人模式”“双人模式”或“退出”：
    - **单人模式**：使用 `A`/`D` 控制左右移动，`S` 加速下落，`W` 旋转方块，消除行积累分数，方块堆积出界则游戏结束。 
    - **双人模式**：左右两侧玩家分别通过对应键盘（如左侧 `A`/`D`/`W`/`S` ，右侧方向键 ）操作，消行触发技能干扰对手，一方方块出界则另一方获胜。 
    - **退出**：直接关闭游戏窗口，结束运行。 

## 五、后续拓展方向
1. **功能优化**：
    - 完善技能多样性，设计更多差异化技能（如冻结对手操作、改变方块类型 ），提升对战策略深度。 
    - 优化界面 UI，增加动画效果（如方块下落、消除行特效 ）、音效（点击、消除、技能触发音效 ），增强沉浸感。 
    - 实现存档与读档功能，支持玩家保存游戏进度，随时续玩。 
2. **模式扩展**：
    - 开发多人在线对战模式，借助网络库（如 Winsock ）实现远程联机，突破本地双人限制。 
    - 新增创意模式（如无尽模式、限制时间模式 ），调整方块下落速度、生成规则，丰富玩法场景。 
3. **跨平台适配**：因 EasyX 依赖 Windows，可迁移至跨平台图形库（如 SFML ），适配 Linux、Mac 系统，扩大玩家群体。 

希望这份俄罗斯方块游戏能给你带来乐趣与编程启发，若有 bug 反馈或创意建议，欢迎交流～ 
